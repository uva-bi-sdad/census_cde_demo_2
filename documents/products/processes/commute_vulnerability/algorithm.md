# Commute Vulnerability

## Synopsis

This document gives a description of the the components related to assessment of SNF vulnerability as a function of workers being unable to report to work due to modeled impact on transportation infrastructure. This includes (1) data, (2) computational modules, (3) the overall algorithm and (4) alternative approaches. 

## Data

The following data sets were used:
  - The NSSAC synthetic population ver. 2.0 for Virginia, US (DP-US-VA-2.0). The description of the elements and data fields contained in this product is presented in the included technical report "Detailed Overview and Description of Components in U.S. Pipeline 2019".
  - The NSSAC Building Database for the US (BDB-1.0). The description of the modeling and the data fields included in this product are provided in the included technical report "NSSAC Building Knowledge Base Modeling and Implementation". 
  - The HERE Premium Streets data (2021/Q1). The full description of this commercial data set is provided in their technical document "". As part of their terms of use, we are not able to provide this document. 
  - The FEMA riverine and coastal flooding maps as provided and documented under URL: https://hazards.fema.gov/nri/riverine-flooding.

## Computational modules

The following modules were used:
  - (**A**) The NSSAC road infrastructure extraction tool for HERE data. This tool uses about 40 of the road link fields from several of the HERE's data tables, generates the nodes and link of the road networks, and also performs speed limit inference for road links where such data is missing. 
  - (**B**) The NSSAC network conversion tool maps the road network prepared by **A** to a reduced form instrumented for a range of applications/scenarios used within NSSAC's projects. 
  - (**C**) The data from **B** is finally converted into a format accepted by the Qwest routing suite (developed by NSSAC graduate student Ashik Islam).
  - (**D**) The Qwest routing simulation suite.
  - (**E**) A custom extraction scripts for extracting the SNFs in Virginia using the synthetic population DP-US-VA-2.0 and the building data base BDB-1.0, and aligning these with the other data prepared as part of the project.
  - (**F**) A custom extraction script to determine the sub-population of DP-US-VA-2.0 (including households) that work at SNFs, including their residence locations.
  - (**G**) A custom script to determine the risk associated with a worker's route on the transportation network using the FEMA riverine/coastal flooding maps as a proxy for risk.
  - (**H**) A custom script to assess each SNF's vulnerability with respect to its worker's estimated commute paths and the modeled vulnerability of these paths.

## Algorithm

The detailed sequence of steps in the algorithm to determine an SNF's vulnerability with respect to commuting is as follows:

1. Run the modules **A**, **B** and **C** in sequence to generate the routing network *G*(routing).
2. Run the tools in module **E** to determine the subset *L*(SNFs) of locations in Virginia that are inferred to by SNFs by the building database BDB-1.0.
3. Run module **G** to infer the set of people *P*(workers) in DP-US-VA-2.0 whose workplace are in *L*(SNFs) and their residence locations *L*(workers).
4. For each worker *p* in *P*(workers), use the Qwest module (**D**) to generate the pair Routes(*p*) of detailed routes from their residence to their work location and back.
5. For each worker *p* in *P*(workers), run the module **G** to integrate the pair of routes in Routes(p) against the FEMA risk map data to associate to each route a vulnerability index.
6. For each SNF, use module **H** to determine its vulnerability with respect to transportation insfrastructure impacts. This is estimated as the fraction of workers deemed unable to report to work based on their route vulnerability indices.


## Alternatives to approaches above

*FEMA data:* replace or augment FEMA flood risk maps with data such as NOAA flood maps, or that of dedicated hydrologial models. 

*Household structure:* one may choose to add a workers household composition (e.g., single parent) into the estimates of that worker's ability to report tow work. One may also consider household income.

*Route construction:* for the routing over a the transportation network one may also incorporate damage from flooding. This would offer route alternatives that could factor into a worker's decision making or ability to report to work. In addition, network loading could be modeled in order to estimate traffic congestion as a result of the impacts to the transportation infrastructure. Public transportation, if available, may also be considered.

*SNF worker population:* an alternative to using the synthetic population DP-US-VA-2.0 to identify the worker population is as follows: for each SNF, *f* say, combine the worker count for *f* obtained from federal data and LODES/ACS commute data. For *f* and its count of workers, one may estimate the distribution of workers' by home county (or census tract). Sampling from this distribution, one may (1) sample the appropriate number of residence locations within the respective home counties and use this as the origin for determining the routes to/from the SNF, and/or (2) identify workers within the synthetic population for Viriginia (DP-US-VA-2.0) with a NAICS designation corresponding to care facilitation. Both approaches (1 and 2) would allow one to accurately match worker counts.
