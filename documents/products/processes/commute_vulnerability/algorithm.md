# Commute Vulnerability

## Synopsis

This document gives a description of the the components related to assessment of SNF vulnerability as a function of workers
being unable to report to work due to modeled impact on transportation infrastructure. This includes (1) data, (2) computational modules, (3) the overall algorithm and (4) alternative approaches. 

## Data

The following data sets were used:
  - The NSSAC synthetic population ver. 2.0 for Virginia, US (DP-US-VA-2.0);
  - The NSSAC Building Database for the US (BDB-1.0);
  - HERE Premium Streets data (2021/Q1); and
  - FEMA riverine and coastal flooding maps.

## Computational modules

The following modules were used:
  - **A** The NSSAC road infrastructure extraction tool for HERE data;
  - **B** The NSSAC network conversion tool for mapping the extracted HERE data into a form suited for routing.
  - **C** Conversion tool for mapping the routing data into a format usable for the Qwest (?) routing suite (by NSSAC GRA Ashik Islam)
  - **D** The Qwest (?) routing tool (Ashik Islam)
  - **E** Custom extraction scripts for extraction of a SNF in the DP-US-VA-2.0 and BDB-1.0, and aligning these with SDAD's data;
  - **F** A custom extraction script to determine the DP-US-VA-2.0 sub-population (with households) that work at SNFs, and their residence locations;
  - **G** A custom script to determine the risk associated with a worker's route on the transportation network;
  - **H** A custom script to assess SNF vulnerability based on worker commute paths and modeled vulnerability of these;

## Algorithm

The sequence of steps in the algorithm to determine SNF vulnerability on the transportation dimension are as follows:

1. Run the modules **A**, **B** and **C** in sequence to generate the routing network *G*(routing).
2. Run the tools in module **E** to determine the subset *L*(SNFs) of locations in VA that are SNFs;
3. Run module **G** to determine the set of people *P*(workers) in DP-US-VA-2.0 whose workplace are in *L*(SNFs) and their residence locations *L*(workers);
4. For each worker *p* in *P*(workers), use module **D** to generate the pair Routes(*p*) of detailed routes from their residence to their work location and back;
5. For each worker *p* in *P*(workers), run module **G** to integrate the pair of routes in Routes(p) against the FEMA risk map data to give each route a vulnerability index;
6. For each SNF, use module **H** to determine its vulnerability with respect to transportation impacts as the fraction of workers deemed unable to report to work.


## Alternatives to approaches above

*FEMA data:* replace FEMA flood risk data NOAA flood maps.

*Household structure:* considerations based on household composition (e.g., single parent) could factor into the reporting-to-work assessment. Household income could also factor into the decision making.

*Route construction:* routing over a network while incorporating damage from flooding would offer route alternatives that could factor into the assessment. In addition, network loading could be applied to assess traffic congestion as a result transportation infrastructure damages. Public transportation could also be considered.

*SNF worker population:* an alternative to directly using DP-US-VA-2.0 would be to for each SNF f combine (a) worker count for f from SNF with (b) LODES/ACS commute data to determine the distribution of worker's home counties (or census tracts) for h. Sampling from this distribution for h, one could either (1) sample the appropriate number of residence locations within the respective home administrative regions, or (2) identify workers within DP-US-VA-2.0 with NAICS designation corresponding to care facilitation. Both approaches (1 and 2) would allow one to accurately match worker counts.
