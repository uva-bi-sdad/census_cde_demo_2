# Commute Vulnerability

## Synopsis

This document gives a description of the the components related to assessment of SNF vulnerability as a function of workers being unable to report to work due to modeled impact on transportation infrastructure. This includes (1) data, (2) computational modules, (3) the overall algorithm and (4) alternative approaches. 

## Data

The following data sets were used:
  - The NSSAC synthetic population ver. 2.0 for Virginia, US (DP-US-VA-2.0). The description of the elements and data fields contained in this product is presented in the included technical report "Detailed Overview and Description of Components in U.S. Pipeline 2019".
  - The NSSAC Building Database for the US (BDB-1.0). The description of the modeling and the data fields included in this product are provided in the included technical report "NSSAC Building Knowledge Base Modeling and Implementation". 
  - The HERE Premium Streets data (2021/Q1). The full description of this commercial data set is provided in their technical document "". As part of their terms of use, we are not able to provide this document. 
  - The FEMA riverine and coastal flooding maps as provided and documented under URL: https://hazards.fema.gov/nri/riverine-flooding.

## Computational modules

The following modules were used:
  - (**A**) The NSSAC road infrastructure extraction tool for HERE data. This tool uses about 40 of the road link fields from several of the HERE's data tables, generates the nodes and link of the road networks, and also performs speed limit inference for road links where such data is missing. 
  - (**B**) The NSSAC network conversion tool maps the road network prepared by **A** to a reduced form instrumented for a range of applications/scenarios used within NSSAC's projects. 
  - (**C**) The data from **B** is finally converted into a format accepted by the Qwest routing suite developed by NSSAC graduate student Ashik Islam.
  - (**D**) The Qwest routing simulation suite.
  - (**E**) A custom extraction scripts for extracting the SNFs in Virginia using the synthetic population DP-US-VA-2.0 and the building data base BDB-1.0, and aligning these with the other data prepared as part of the project.
  - (**F**) A custom extraction script to determine the sub-population of DP-US-VA-2.0 (including households) that work at SNFs, including their residence locations.
  - (**G**) A custom script to determine the risk associated with a worker's route on the transportation network using the FEMA riverine/coastal flooding maps as a proxy for risk.
  - (**H**) A custom script to assess each SNF's vulnerability with respect to its worker's estimated commute paths and the modeled vulnerability of these paths.

## Algorithm

The detailed sequence of steps in the algorithm to determine an SNF's vulnerability with respect to commuting is as follows:

1. Run the modules **A**, **B** and **C** in sequence to generate the routing network *G*(routing).
2. Run the tools in module **E** to determine the subset *L*(SNFs) of locations in VA that are SNFs;
3. Run module **G** to determine the set of people *P*(workers) in DP-US-VA-2.0 whose workplace are in *L*(SNFs) and their residence locations *L*(workers);
4. For each worker *p* in *P*(workers), use module **D** to generate the pair Routes(*p*) of detailed routes from their residence to their work location and back;
5. For each worker *p* in *P*(workers), run module **G** to integrate the pair of routes in Routes(p) against the FEMA risk map data to give each route a vulnerability index;
6. For each SNF, use module **H** to determine its vulnerability with respect to transportation impacts as the fraction of workers deemed unable to report to work.


## Alternatives to approaches above

*FEMA data:* replace FEMA flood risk data with data from NOAA flood maps.

*Household structure:* considerations based on household composition (e.g., single parent) could factor into the reporting-to-work assessment. Household income could also factor into the decision making.

*Route construction:* routing over a network while incorporating damage from flooding would offer route alternatives that could factor into the assessment. In addition, network loading could be applied to assess traffic congestion as a result transportation infrastructure damages. Public transportation could also be considered.

*SNF worker population:* an alternative to directly using DP-US-VA-2.0 would be for each SNF, f, combine (a) worker count for f from the SNF with (b) LODES/ACS commute data to determine the distribution of worker's home counties (or census tracts) for h. Sampling from this distribution for h, one could either (1) sample the appropriate number of residence locations within the respective home administrative regions, or (2) identify workers within DP-US-VA-2.0 with NAICS designation corresponding to care facilitation. Both approaches (1 and 2) would allow one to accurately match worker counts.
